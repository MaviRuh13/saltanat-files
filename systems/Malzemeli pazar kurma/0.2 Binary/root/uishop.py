# Ekle
import maviruhInfo

# Arat
def Refresh(self):

# Ustune Ekle (varsa ekleme)
	def __GetRealIndex(self, i):
		return self.tabIdx * shop.SHOP_SLOT_COUNT + i

# Arat
		self.titleBar.SetCloseEvent(ui.__mem_func__(self.Close))

# Altina Ekle (varsa ekleme)
		self.tabIdx = 0
		self.Refresh()

# Arat
	def AskBuyItem(self, slotPos):

# Komple Degistir
	if app.MAVIRUH_MULTI_PRICE:
		def AskBuyItem(self, slotPos):
			slotPos = self.__GetRealIndex(slotPos)
			
			itemIndex = shop.GetItemID(slotPos)
			itemPrice = shop.GetItemPrice(slotPos)
			itemCount = shop.GetItemCount(slotPos)

			item.SelectItem(itemIndex)
			itemName = item.GetItemName()
			
			if slotPos == 0:
				suprices = constInfo.sufiyat0
				barprices = constInfo.barfiyat0
			if slotPos == 1:
				suprices = constInfo.sufiyat1
				barprices = constInfo.barfiyat1
			if slotPos == 2:
				suprices = constInfo.sufiyat2
				barprices = constInfo.barfiyat2
			if slotPos == 3:
				suprices = constInfo.sufiyat3
				barprices = constInfo.barfiyat3
			if slotPos == 4:
				suprices = constInfo.sufiyat4
				barprices = constInfo.barfiyat4
			if slotPos == 5:
				suprices = constInfo.sufiyat5
				barprices = constInfo.barfiyat5
			if slotPos == 6:
				suprices = constInfo.sufiyat6
				barprices = constInfo.barfiyat6
			if slotPos == 7:
				suprices = constInfo.sufiyat7
				barprices = constInfo.barfiyat7
			if slotPos == 8:
				suprices = constInfo.sufiyat8
				barprices = constInfo.barfiyat8
			if slotPos == 9:
				suprices = constInfo.sufiyat9
				barprices = constInfo.barfiyat9
			if slotPos == 10:
				suprices = constInfo.sufiyat10
				barprices = constInfo.barfiyat10
			if slotPos == 11:
				suprices = constInfo.sufiyat11
				barprices = constInfo.barfiyat11
			if slotPos == 12:
				suprices = constInfo.sufiyat12
				barprices = constInfo.barfiyat12
			if slotPos == 13:
				suprices = constInfo.sufiyat13
				barprices = constInfo.barfiyat13
			if slotPos == 14:
				suprices = constInfo.sufiyat14
				barprices = constInfo.barfiyat14
			if slotPos == 15:
				suprices = constInfo.sufiyat15
				barprices = constInfo.barfiyat15
			if slotPos == 16:
				suprices = constInfo.sufiyat16
				barprices = constInfo.barfiyat16
			if slotPos == 17:
				suprices = constInfo.sufiyat17
				barprices = constInfo.barfiyat17
			if slotPos == 18:
				suprices = constInfo.sufiyat18
				barprices = constInfo.barfiyat18
			if slotPos == 19:
				suprices = constInfo.sufiyat19
				barprices = constInfo.barfiyat19
			if slotPos == 20:
				suprices = constInfo.sufiyat20
				barprices = constInfo.barfiyat20
			if slotPos == 21:
				suprices = constInfo.sufiyat21
				barprices = constInfo.barfiyat21
			if slotPos == 22:
				suprices = constInfo.sufiyat22
				barprices = constInfo.barfiyat22
			if slotPos == 23:
				suprices = constInfo.sufiyat23
				barprices = constInfo.barfiyat23
			if slotPos == 24:
				suprices = constInfo.sufiyat24
				barprices = constInfo.barfiyat24
			if slotPos == 25:
				suprices = constInfo.sufiyat25
				barprices = constInfo.barfiyat25
			if slotPos == 26:
				suprices = constInfo.sufiyat26
				barprices = constInfo.barfiyat26
			if slotPos == 27:
				suprices = constInfo.sufiyat27
				barprices = constInfo.barfiyat27
			if slotPos == 28:
				suprices = constInfo.sufiyat28
				barprices = constInfo.barfiyat28
			if slotPos == 29:
				suprices = constInfo.sufiyat29
				barprices = constInfo.barfiyat29
			if slotPos == 30:
				suprices = constInfo.sufiyat30
				barprices = constInfo.barfiyat30
			if slotPos == 31:
				suprices = constInfo.sufiyat31
				barprices = constInfo.barfiyat31
			if slotPos == 32:
				suprices = constInfo.sufiyat32
				barprices = constInfo.barfiyat32
			if slotPos == 33:
				suprices = constInfo.sufiyat33
				barprices = constInfo.barfiyat33
			if slotPos == 34:
				suprices = constInfo.sufiyat34
				barprices = constInfo.barfiyat34
			if slotPos == 35:
				suprices = constInfo.sufiyat35
				barprices = constInfo.barfiyat35
			if slotPos == 36:
				suprices = constInfo.sufiyat36
				barprices = constInfo.barfiyat36
			if slotPos == 37:
				suprices = constInfo.sufiyat37
				barprices = constInfo.barfiyat37
			if slotPos == 38:
				suprices = constInfo.sufiyat38
				barprices = constInfo.barfiyat38
			if slotPos == 39:
				suprices = constInfo.sufiyat39
				barprices = constInfo.barfiyat39
			if slotPos == 40:
				suprices = constInfo.sufiyat40
				barprices = constInfo.barfiyat40
			if slotPos == 41:
				suprices = constInfo.sufiyat41
				barprices = constInfo.barfiyat41
			if slotPos == 42:
				suprices = constInfo.sufiyat42
				barprices = constInfo.barfiyat42
			if slotPos == 43:
				suprices = constInfo.sufiyat43
				barprices = constInfo.barfiyat43
			if slotPos == 44:
				suprices = constInfo.sufiyat44
				barprices = constInfo.barfiyat44
			if slotPos == 45:
				suprices = constInfo.sufiyat45
				barprices = constInfo.barfiyat45
			if slotPos == 46:
				suprices = constInfo.sufiyat46
				barprices = constInfo.barfiyat46
			if slotPos == 47:
				suprices = constInfo.sufiyat47
				barprices = constInfo.barfiyat47
			if slotPos == 48:
				suprices = constInfo.sufiyat48
				barprices = constInfo.barfiyat48
			if slotPos == 49:
				suprices = constInfo.sufiyat49
				barprices = constInfo.barfiyat49
			if slotPos == 50:
				suprices = constInfo.sufiyat50
				barprices = constInfo.barfiyat50
			if slotPos == 51:
				suprices = constInfo.sufiyat51
				barprices = constInfo.barfiyat51
			if slotPos == 52:
				suprices = constInfo.sufiyat52
				barprices = constInfo.barfiyat52
			if slotPos == 53:
				suprices = constInfo.sufiyat53
				barprices = constInfo.barfiyat53
			if slotPos == 54:
				suprices = constInfo.sufiyat54
				barprices = constInfo.barfiyat54
			if slotPos == 55:
				suprices = constInfo.sufiyat55
				barprices = constInfo.barfiyat55
			if slotPos == 56:
				suprices = constInfo.sufiyat56
				barprices = constInfo.barfiyat56
			if slotPos == 57:
				suprices = constInfo.sufiyat57
				barprices = constInfo.barfiyat57
			if slotPos == 58:
				suprices = constInfo.sufiyat58
				barprices = constInfo.barfiyat58
			if slotPos == 59:
				suprices = constInfo.sufiyat59
				barprices = constInfo.barfiyat59
			if slotPos == 60:
				suprices = constInfo.sufiyat60
				barprices = constInfo.barfiyat60
			if slotPos == 61:
				suprices = constInfo.sufiyat61
				barprices = constInfo.barfiyat61
			if slotPos == 62:
				suprices = constInfo.sufiyat62
				barprices = constInfo.barfiyat62
			if slotPos == 63:
				suprices = constInfo.sufiyat63
				barprices = constInfo.barfiyat63
			if slotPos == 64:
				suprices = constInfo.sufiyat64
				barprices = constInfo.barfiyat64
			if slotPos == 65:
				suprices = constInfo.sufiyat65
				barprices = constInfo.barfiyat65
			if slotPos == 66:
				suprices = constInfo.sufiyat66
				barprices = constInfo.barfiyat66
			if slotPos == 67:
				suprices = constInfo.sufiyat67
				barprices = constInfo.barfiyat67
			if slotPos == 68:
				suprices = constInfo.sufiyat68
				barprices = constInfo.barfiyat68
			if slotPos == 69:
				suprices = constInfo.sufiyat69
				barprices = constInfo.barfiyat69
			if slotPos == 70:
				suprices = constInfo.sufiyat70
				barprices = constInfo.barfiyat70
			if slotPos == 71:
				suprices = constInfo.sufiyat71
				barprices = constInfo.barfiyat71
			if slotPos == 72:
				suprices = constInfo.sufiyat72
				barprices = constInfo.barfiyat72
			if slotPos == 73:
				suprices = constInfo.sufiyat73
				barprices = constInfo.barfiyat73
			if slotPos == 74:
				suprices = constInfo.sufiyat74
				barprices = constInfo.barfiyat74
			if slotPos == 75:
				suprices = constInfo.sufiyat75
				barprices = constInfo.barfiyat75
			if slotPos == 76:
				suprices = constInfo.sufiyat76
				barprices = constInfo.barfiyat76
			if slotPos == 77:
				suprices = constInfo.sufiyat77
				barprices = constInfo.barfiyat77
			if slotPos == 78:
				suprices = constInfo.sufiyat78
				barprices = constInfo.barfiyat78
			if slotPos == 79:
				suprices = constInfo.sufiyat79
				barprices = constInfo.barfiyat79
			if slotPos == 80:
				suprices = constInfo.sufiyat80
				barprices = constInfo.barfiyat80
			if slotPos == 81:
				suprices = constInfo.sufiyat81
				barprices = constInfo.barfiyat81
			if slotPos == 82:
				suprices = constInfo.sufiyat82
				barprices = constInfo.barfiyat82
			if slotPos == 83:
				suprices = constInfo.sufiyat83
				barprices = constInfo.barfiyat83
			if slotPos == 84:
				suprices = constInfo.sufiyat84
				barprices = constInfo.barfiyat84
			if slotPos == 85:
				suprices = constInfo.sufiyat85
				barprices = constInfo.barfiyat85
			if slotPos == 86:
				suprices = constInfo.sufiyat86
				barprices = constInfo.barfiyat86
			if slotPos == 87:
				suprices = constInfo.sufiyat87
				barprices = constInfo.barfiyat87
			if slotPos == 88:
				suprices = constInfo.sufiyat88
				barprices = constInfo.barfiyat88
			if slotPos == 89:
				suprices = constInfo.sufiyat89
				barprices = constInfo.barfiyat89
			if slotPos == 90:
				suprices = constInfo.sufiyat90
				barprices = constInfo.barfiyat90
			if slotPos == 91:
				suprices = constInfo.sufiyat91
				barprices = constInfo.barfiyat91
			if slotPos == 92:
				suprices = constInfo.sufiyat92
				barprices = constInfo.barfiyat92
			if slotPos == 93:
				suprices = constInfo.sufiyat93
				barprices = constInfo.barfiyat93
			if slotPos == 94:
				suprices = constInfo.sufiyat94
				barprices = constInfo.barfiyat94
			if slotPos == 95:
				suprices = constInfo.sufiyat95
				barprices = constInfo.barfiyat95
			if slotPos == 96:
				suprices = constInfo.sufiyat96
				barprices = constInfo.barfiyat96
			if slotPos == 97:
				suprices = constInfo.sufiyat97
				barprices = constInfo.barfiyat97
			if slotPos == 98:
				suprices = constInfo.sufiyat98
				barprices = constInfo.barfiyat98
			if slotPos == 99:
				suprices = constInfo.sufiyat99
				barprices = constInfo.barfiyat99
			if slotPos == 100:
				suprices = constInfo.sufiyat100
				barprices = constInfo.barfiyat100

			itemBuyQuestionDialog = uiCommon.QuestionDialog()
			if app.ENABLE_2TH_SHOPEX_SYSTEM:
				if shop.GetType() == shop.SHOP_TYPE_GOLD:
					itemBuyQuestionDialog.SetText(maviruhInfo.EXCHANGE_SATIN_ALMAK_ISTIYOR_MUSUN+str(itemName)+maviruhInfo.EXCHANGE_ADET+str(itemCount)+maviruhInfo.EXCHANGE_FIYAT+str(localeInfo.NumberToMoneyString(itemPrice))+maviruhInfo.EXCHANGE_SU_TASI+str(suprices)+maviruhInfo.EXCHANGE_BAR+str(barprices))
				elif shop.GetType() == shop.SHOP_TYPE_CASH:
					itemBuyQuestionDialog.SetText(localeInfo.DO_YOU_BUY_ITEM(itemName, itemCount, localeInfo.NumberToDragonCoinString(itemPrice)))
				elif shop.GetType() == shop.SHOP_TYPE_COINS:
					itemBuyQuestionDialog.SetText(localeInfo.DO_YOU_BUY_ITEM(itemName, itemCount, localeInfo.NumberToDragonMarkString(itemPrice)))
				elif shop.GetType() == shop.SHOP_TYPE_ALIGN:
					itemBuyQuestionDialog.SetText(localeInfo.DO_YOU_BUY_ITEM(itemName, itemCount, localeInfo.NumberToAlignmentString(itemPrice)))
				else:
					itemBuyQuestionDialog.SetText(maviruhInfo.EXCHANGE_SATIN_ALMAK_ISTIYOR_MUSUN+str(itemName)+maviruhInfo.EXCHANGE_ADET+str(itemCount)+maviruhInfo.EXCHANGE_FIYAT+str(localeInfo.NumberToMoneyString(itemPrice))+maviruhInfo.EXCHANGE_SU_TASI+str(suprices)+maviruhInfo.EXCHANGE_BAR+str(barprices))
			else:
				itemBuyQuestionDialog.SetText(maviruhInfo.EXCHANGE_SATIN_ALMAK_ISTIYOR_MUSUN+str(itemName)+maviruhInfo.EXCHANGE_ADET+str(itemCount)+maviruhInfo.EXCHANGE_FIYAT+str(localeInfo.NumberToMoneyString(itemPrice))+maviruhInfo.EXCHANGE_SU_TASI+str(suprices)+maviruhInfo.EXCHANGE_BAR+str(barprices))
			itemBuyQuestionDialog.SetAcceptEvent(lambda arg=TRUE: self.AnswerBuyItem(arg))
			itemBuyQuestionDialog.SetCancelEvent(lambda arg=FALSE: self.AnswerBuyItem(arg))
			itemBuyQuestionDialog.Open()
			itemBuyQuestionDialog.pos = slotPos
			self.itemBuyQuestionDialog = itemBuyQuestionDialog
	else:
		def AskBuyItem(self, slotPos):
			slotPos = self.__GetRealIndex(slotPos)
			
			itemIndex = shop.GetItemID(slotPos)
			itemPrice = shop.GetItemPrice(slotPos)
			itemCount = shop.GetItemCount(slotPos)

			item.SelectItem(itemIndex)
			itemName = item.GetItemName()

			itemBuyQuestionDialog = uiCommon.QuestionDialog()
			itemBuyQuestionDialog.SetText(localeInfo.DO_YOU_BUY_ITEM(itemName, itemCount, localeInfo.NumberToMoneyString(itemPrice)))
			itemBuyQuestionDialog.SetAcceptEvent(lambda arg=True: self.AnswerBuyItem(arg))
			itemBuyQuestionDialog.SetCancelEvent(lambda arg=False: self.AnswerBuyItem(arg))
			itemBuyQuestionDialog.Open()
			itemBuyQuestionDialog.pos = slotPos
			self.itemBuyQuestionDialog = itemBuyQuestionDialog
			
			constInfo.SET_ITEM_QUESTION_DIALOG_STATUS(1)
